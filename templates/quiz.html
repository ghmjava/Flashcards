{% extends "base.html" %}

{% block content %}

<div class="input-group form-group input-group-sm col-xs-12 col-md-6 col-md-offset-3">
	 <label id="question" for="question" class="top-buffer">Question</label>
        <input id="answer" type="text" id="answer" name="answer" class="form-control" placeholder="Answer" required autofocus>

		<span class="col-xs-12 top-buffer"></span>
		<div class="col-xs-6 col-xs-offset-3">
		<button id="next-button" class="btn btn-lg btn-block btn-primary" type="button">Next</button>
		</div>

<div class="progress col-xs-12 triple-top-buffer">
<div id="progress-bar" class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
    0%
  </div>
</div>

</div>

{% endblock %}

{% block bottom %}

<span id="holder-dictionary" hidden="true">{{ dictionary }}</span>
<span id="holder-questions" hidden="true">{{ questions }}</span>

	<script>

    $('.progress-bar').css('width', 0+'%').attr('aria-valuenow', 0);
    $('#progress-bar').text('0%');

	$(document).ready(function() {

		questions = $('#holder-questions').text();
		serv_url = 'rest/dictionaries/' + $('#holder-dictionary').text();

		$.ajax({

	        url: serv_url
	    }).then(function(data) {
	    	alert(data.flashcards);
	})});

    
    var curr = 0;
    
    var questions = [
    	{word:"car0", translation:"samochod", answered:null},
    	{word:"car1", translation:"samochod", answered:null},
    	{word:"car2", translation:"samochod", answered:null},
    	{word:"car3", translation:"samochod", answered:null},
    	{word:"car4", translation:"samochod", answered:null}
    	];
    var no_of_questions = questions.length;
    
    $('#question').text(questions[0].word);
    	
	$('#next-button').on('click', function (e) {

		curr+=1;
		if(curr >= no_of_questions){
			progress = 100;
		     $('.progress-bar').css('width', progress+'%').attr('aria-valuenow', progress);
		     $('#progress-bar').text(progress + '%');

			alert("END");
			return;
		}

		progress = 100 * curr / no_of_questions;
	     $('.progress-bar').css('width', progress+'%').attr('aria-valuenow', progress);
	     $('#progress-bar').text(progress + '%');
	     $('#question').text(questions[curr].word);


	})
	</script>
{% endblock %}
